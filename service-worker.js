!function(e,i){if("object"==typeof exports&&"object"==typeof module)module.exports=i();else if("function"==typeof define&&define.amd)define([],i);else{var t=i();for(var s in t)("object"==typeof exports?exports:e)[s]=t[s]}}(self,()=>(()=>{var e={387:e=>{const i=self;importScripts("/build.js"),i.addEventListener("install",e=>{i.skipWaiting()}),i.addEventListener("activate",e=>{e.waitUntil(i.clients.claim())}),i.addEventListener("notificationclick",e=>{const i=e.notification,t=(i.data&&i.data.FCM_MSG?i.data.FCM_MSG.data:null)||{},s=(i.data&&i.data.FCM_MSG?i.data.FCM_MSG.notification:null)||{},a=s.click_action||t.click_action||"/";console.log("notificationclick event",e),console.log("notificationclick data",t),console.log("notificationclick payload",s),console.log("notificationclick clickAction",a),e.waitUntil(clients.openWindow(a)),i.close()}),importScripts("https://www.gstatic.com/firebasejs/12.6.0/firebase-app-compat.js","https://www.gstatic.com/firebasejs/12.6.0/firebase-messaging-compat.js"),e.exports=class{constructor(){this.serviceWorker=null,this.config=i.UJ_BUILD_JSON?.config||{},this.app=this.config?.brand?.id||"default",this.environment=this.config?.uj?.environment||"production",this.cache={breaker:this.config?.uj?.cache_breaker||(new Date).getTime()},this.cache.name=`${this.app}-${this.cache.breaker}`,this.libraries={firebase:!1,messaging:!1,promoServer:!1}}async initialize(){return this.serviceWorker=i,this.setupInstanceHandlers(),this.initializeFirebase(),this.updateCache(),console.log("Initialized!",i.location.pathname,i),console.log("Config loaded from UJ_BUILD_JSON:",this.config),i}setupInstanceHandlers(){i.addEventListener("message",e=>{const i=e.data||{},t=i.command||"",s=i.payload||{};if(t&&(console.log("message",t,s,e),"update-cache"===t)){const i=s.pages||[];this.updateCache(i).then(()=>{e.ports[0]?.postMessage({status:"success"})}).catch(i=>{e.ports[0]?.postMessage({status:"error",error:i.message})})}}),console.log("Set up message handlers")}initializeFirebase(){const e=this.config?.web_manager?.firebase?.app?.config;e?this.libraries.firebase?console.log("Firebase already initialized"):(console.log("Initializing Firebase v12.6.0"),firebase.initializeApp(e),this.libraries.messaging=firebase.messaging(),this.libraries.firebase=firebase):console.log("Firebase config not available yet, skipping Firebase initialization")}updateCache(e){e=e||[];const i=[...new Set(["/","/assets/css/main.bundle.css","/assets/js/main.bundle.js",...e])];return caches.open(this.cache.name).then(e=>e.addAll(i)).then(()=>console.log("Cached resources:",i)).catch(e=>console.error("Failed to cache resources:",e))}}}},i={};function t(s){var a=i[s];if(void 0!==a)return a.exports;var o=i[s]={exports:{}};return e[s](o,o.exports,t),o.exports}return(()=>{"use strict";var e;(new(((e=t(387))&&e.__esModule?e:{default:e}).default)).initialize().then(function(){console.log("Initialized service-worker.js")})})(),{}})());