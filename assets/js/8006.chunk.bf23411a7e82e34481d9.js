"use strict";(self.webpackChunkultimate_jekyll=self.webpackChunkultimate_jekyll||[]).push([[8006],{8006:(e,t,n)=>{n.d(t,{A:()=>a});var o=n(2984);function a(e){const{webManager:t}=e;let a=null;const i="true"===new URL(window.location.href).searchParams.get("authPopup")||window!==window.top;function s({state:e}){"initializing"!==e&&a.$form.querySelectorAll(".form-initializing-spinner").forEach(e=>{e.classList.add("d-none")})}function r({data:e,setError:t,$submitButton:n}){const o=n?.getAttribute("data-provider");"email"===o&&(e.email?.trim()||t("email","Email is required"),e.password||t("password","Password is required"))}function c(e,o){return async({data:s,$submitButton:r})=>{const c=r?.getAttribute("data-provider");"email"===c?await o(s):c&&await async function(e,o="signin"){try{const{getAuth:t,signInWithPopup:s,signInWithRedirect:r,GoogleAuthProvider:c,FacebookAuthProvider:u,TwitterAuthProvider:d,GithubAuthProvider:l}=await Promise.all([n.e(9943),n.e(7480)]).then(n.bind(n,7480)),h=t();let m;switch(e){case"google.com":m=new c;break;case"facebook.com":m=new u;break;case"twitter.com":m=new d;break;case"github.com":m=new l;break;default:throw new Error(`Unsupported provider: ${e}`)}if(i)try{const t=await s(h,m);console.log("[Auth] Successfully authenticated via popup:",t.user.email);const n=t.additionalUserInfo?.isNewUser;n||"signup"===o?(g(e,t.user),a.showSuccess("Account created successfully!")):(w(e,t.user),a.showSuccess("Successfully signed in!"))}catch(e){if("auth/popup-blocked"!==e.code&&"auth/popup-closed-by-user"!==e.code&&"auth/cancelled-popup-request"!==e.code)throw e;console.log("[Auth] Popup failed, falling back to redirect:",e.code),await r(h,m)}else console.log("[Auth] Using redirect for authentication"),await r(h,m)}catch(e){if(h(e.code)||t.sentry().captureException(new Error("OAuth provider sign-in error",{cause:e})),"auth/account-exists-with-different-credential"===e.code)throw new Error("An account already exists with the same email address but different sign-in credentials. Try signing in with a different provider.");if("auth/invalid-credential"===e.code)throw new Error("Invalid credentials. Please try again.");if("auth/operation-not-allowed"===e.code)throw new Error("This sign-in method is not enabled. Please contact support.");if("auth/user-disabled"===e.code)throw new Error("This account has been disabled. Please contact support.");throw e}}(c,e)}}async function u(e,t){const{getAuth:o,signInWithEmailAndPassword:a}=await Promise.all([n.e(9943),n.e(7480)]).then(n.bind(n,7480)),i=o();return await a(i,e,t)}async function d(e){const t=e.email?.trim()||"",o=e.password||"",{getAuth:i,createUserWithEmailAndPassword:s}=await Promise.all([n.e(9943),n.e(7480)]).then(n.bind(n,7480)),r=i();try{g("email",(await s(r,t,o)).user),a.showSuccess("Account created successfully!")}catch(e){if("auth/email-already-in-use"===e.code)try{return console.log("[Auth] Email already in use, attempting to sign in instead:",t),w("email",(await u(t,o)).user),void a.showSuccess("Successfully signed in!")}catch(e){throw new Error("An account with this email already exists")}throw e}}async function l(e){const t=e.email?.trim()||"",n=e.password||"";console.log("[Auth] Attempting email sign-in for:",t),w("email",(await u(t,n)).user),a.showSuccess("Successfully signed in!")}function h(e){return["auth/user-not-found","auth/wrong-password","auth/invalid-credential","auth/invalid-email","auth/weak-password","auth/email-already-in-use","auth/user-disabled","auth/too-many-requests","auth/popup-closed-by-user","auth/cancelled-popup-request"].includes(e)}function w(e,t){const n=t.uid,o=e.charAt(0).toUpperCase()+e.slice(1);gtag("event","login",{method:e,user_id:n}),fbq("trackCustom","Login",{content_name:`Account Login ${o}`,method:e}),ttq.track("Login",{content_id:`account-login-${e}`,content_type:"product",content_name:`Account Login ${o}`})}function g(e,t){const n=t.uid,o=e.charAt(0).toUpperCase()+e.slice(1);gtag("event","sign_up",{method:e,user_id:n}),fbq("track","CompleteRegistration",{content_name:`Account Registration ${o}`,method:e}),ttq.track("CompleteRegistration",{content_id:`account-registration-${e}`,content_type:"product",content_name:`Account Registration ${o}`})}function m(){gtag("event","password_reset",{method:"email",status:"success"}),fbq("trackCustom","PasswordReset",{method:"email",status:"success"}),ttq.track("SubmitForm",{content_id:"password-reset",content_type:"product",content_name:"Password Reset"})}t.dom().ready().then(async()=>{console.log("[Auth] Initialized. useAuthPopup:",i),await async function(e){const t=new URL(window.location.href);if("true"===t.searchParams.get("authSignout"))try{console.log("[Auth] Signing out user due to authSignout=true parameter"),await e.auth().signOut(),t.searchParams.delete("authSignout"),window.history.replaceState({},document.title,t.toString())}catch(e){console.error("[Auth] Error signing out:",e)}}(t),function(){const e=document.documentElement.getAttribute("data-page-path");e?"/signin"===e?(a=new o.A("#auth-form",{autoReady:!1,allowResubmit:!1,submittingText:"Signing in...",submittedText:"Signed In!"}),a.on("statechange",s),a.on("validation",r),a.on("submit",c("signin",l))):"/signup"===e?(a=new o.A("#auth-form",{autoReady:!1,allowResubmit:!1,submittingText:"Creating account...",submittedText:"Account Created!"}),a.on("statechange",s),a.on("validation",r),a.on("submit",c("signup",d))):"/reset"===e&&(a=new o.A("#auth-form",{autoReady:!1,allowResubmit:!1,submittingText:"Sending...",submittedText:"Email Sent!"}),a.on("statechange",s),a.on("submit",({data:e})=>async function(e){const t=e.email?.trim()||"",{getAuth:o,sendPasswordResetEmail:i}=await Promise.all([n.e(9943),n.e(7480)]).then(n.bind(n,7480)),s=o();try{await i(s,t),m(),a.showSuccess(`Password reset email sent to ${t}. Please check your inbox.`)}catch(e){if("auth/user-not-found"===e.code)return m(),void a.showSuccess(`If an account exists for ${t}, a password reset email has been sent.`);throw e}}(e))):console.warn("[Auth] No data-page-path attribute found on HTML element")}();const e=await async function(){try{const{getAuth:e,getRedirectResult:t}=await Promise.all([n.e(9943),n.e(7480)]).then(n.bind(n,7480)),o=e(),i=await t(o);if(console.log("[Auth] Redirect result:",i),!i||!i.user)return!1;console.log("[Auth] Successfully authenticated via redirect:",i.user.email);const s=i.providerId||i.user.providerData?.[0]?.providerId||"unknown",r=i.additionalUserInfo?.isNewUser,c=document.documentElement.getAttribute("data-page-path");return r||"/signup"===c?(g(s,i.user),a.showSuccess("Account created successfully!")):(w(s,i.user),a.showSuccess("Successfully signed in!")),!0}catch(e){return h(e.code)||t.sentry().captureException(new Error("Error handling redirect result",{cause:e})),"auth/account-exists-with-different-credential"===e.code?a.showError("An account already exists with the same email address but different sign-in credentials. Try signing in with a different provider."):"auth/popup-blocked"===e.code?a.showError("Popup was blocked. Please allow popups for this site and try again."):"auth/operation-not-allowed"===e.code?a.showError("This sign-in method is not enabled."):e.code&&"auth/cancelled-popup-request"!==e.code&&a.showError(`Authentication error: ${e.message}`),!1}}();console.log("[Auth] hasRedirectResult:",e),e||function(){const e=t.config.auth?.config?.allowSubdomainAuth??!0,n=window.location.hostname,o=n.split("."),a=o.length>=3&&!n.includes("localhost")&&!/^\d+\.\d+\.\d+\.\d+$/.test(n);if(console.log("[Auth] checkSubdomainAuth - hostname:",n,"parts:",o,"isSubdomain:",a,"allowSubdomainAuth:",e),e)return!1;if(!a)return!1;const i=o.slice(-2).join("."),s=new URL(window.location.href);return s.hostname=i,console.log("[Auth] Redirecting to apex domain for authentication:",s.href),window.location.href=s.href,!0}()||(a.ready(),function(){const e=new URL(window.location.href).searchParams.get("authReturnUrl");e?document.querySelectorAll("a[href]").forEach(t=>{if(!t.href.includes("/signin")&&!t.href.includes("/signup")&&!t.href.includes("/reset"))return;const n=new URL(t.href,window.location.origin);n.searchParams.set("authReturnUrl",e),t.href=n.toString()}):console.warn("[Auth] No authReturnUrl provided in URL parameters.")}(),document.querySelectorAll(".uj-password-toggle").forEach(e=>{e.addEventListener("click",()=>{const t=e.closest(".input-group").querySelector("input");if(!t)return;const n="password"===t.type?"text":"password";t.type=n;const o=e.querySelector(".uj-password-show"),a=e.querySelector(".uj-password-hide");o&&a&&("text"===n?(o.classList.add("d-none"),a.classList.remove("d-none")):(o.classList.remove("d-none"),a.classList.add("d-none")))})}))})}}}]);