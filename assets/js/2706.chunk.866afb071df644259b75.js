"use strict";(self.webpackChunkultimate_jekyll=self.webpackChunkultimate_jekyll||[]).push([[1547,2706,2752,7550,7674,8337],{1547:(e,t,n)=>{n.r(t),n.d(t,{init:()=>a,loadData:()=>i});let o=null;function a(e){o=e,["marketing-emails","security-emails","product-emails"].forEach(e=>{const t=document.getElementById(e);t&&t.addEventListener("change",s)})}function i(e){if(!e)return;const t=e.preferences?.notifications||{};c("marketing-emails",!1!==t.marketing),c("security-emails",!1!==t.security),c("product-emails",!0===t.product)}async function s(e){const t=e.target.id,n=e.target.checked;try{const e=t.replace("-emails","");await async function(e,t){console.log("Updating notification preference:",e,t)}(e,n);const o=n?"enabled":"disabled";r(`${function(e){switch(e){case"marketing-emails":return"Marketing emails";case"security-emails":return"Security alerts";case"product-emails":return"Product updates";default:return"Notifications"}}(t)} ${o}`,"success")}catch(t){console.error("Failed to update notification preference:",t),e.target.checked=!n,r("Failed to update notification preferences. Please try again.","danger")}}function c(e,t){const n=document.getElementById(e);n&&(n.checked=t)}function r(e,t="info"){const n=document.createElement("div");n.className=`toast align-items-center text-bg-${t} border-0 position-fixed bottom-0 end-0 m-3`,n.setAttribute("role","alert"),n.setAttribute("aria-live","assertive"),n.setAttribute("aria-atomic","true"),n.style.zIndex="9999",n.innerHTML=`\n    <div class="d-flex">\n      <div class="toast-body">\n        ${e}\n      </div>\n      <button type="button" class="btn-close btn-close-white me-2 m-auto" data-bs-dismiss="toast" aria-label="Close"></button>\n    </div>\n  `,document.body.appendChild(n),window.bootstrap&&window.bootstrap.Toast?(new window.bootstrap.Toast(n).show(),n.addEventListener("hidden.bs.toast",()=>{n.remove()})):setTimeout(()=>{n.remove()},3e3)}},2706:(e,t,n)=>{n.r(t),n.d(t,{default:()=>f});var o=n(4289),a=n.n(o),i=n(7550),s=n(1547),c=n(5725),r=n(2752),l=n(7674),d=n(8337),u=n(9668),m=n(8704),g=n(9978);let p=null;const f=e=>new Promise(async function(t){p=e.webManager,await p.dom().ready();try{await async function(){y=document.querySelectorAll("#account-nav .nav-link"),b=document.querySelectorAll(".account-section"),b.forEach(e=>{"loading-section"!==e.id&&e.classList.add("d-none")}),function(){y.forEach(e=>{e.addEventListener("click",t=>{t.preventDefault();const n=e.dataset.section;I(n),window.location.hash=n})});const e=document.getElementById("mobile-nav-select");e&&e.addEventListener("change",e=>{const t=e.target.value;I(t),window.location.hash=t}),window.addEventListener("hashchange",E)}(),"#delete"===window.location.hash&&$(),Object.values(w).forEach(e=>{e.init&&e.init(p)}),p.auth().listen({account:!0},async e=>{console.log("Auth state with account data:",e),await async function(){return v||(v=(async()=>{try{const e=p.config.brand.id,t="https://api.itwcreativeworks.com",n=await a()(`${t}/get-app`,{response:"json",query:{id:e}});return console.log("Fetched app data:",n),h=n,n}catch(e){return p.sentry().captureException(new Error("Failed to fetch app data",{cause:e})),null}})(),v)}(),function(e){const{user:t,account:n}=e;w.profile.loadData&&w.profile.loadData(n,t),w.notifications.loadData&&w.notifications.loadData(n),w.security.loadData&&w.security.loadData(n),w.billing.loadData&&w.billing.loadData(n,h),w.team&&w.team.loadData&&w.team.loadData(n),w.referrals&&w.referrals.loadData&&w.referrals.loadData(n),w["api-keys"]&&w["api-keys"].loadData&&w["api-keys"].loadData(n),w.delete.loadData&&w.delete.loadData(n),w.connections.loadData&&w.connections.loadData(n,h)}(e),function(){const e=document.getElementById("loading-section");e&&e.classList.add("d-none")}(),E()})}()}catch(e){p.sentry().captureException(new Error("Failed to initialize account page",{cause:e}))}return t()});let y=null,b=null,h=null,v=null;const w={profile:i,notifications:s,security:c,billing:r,team:l,referrals:d,"api-keys":u,delete:m,connections:g};function E(){const e=window.location.hash.slice(1);"delete"===e&&$(),e?document.getElementById(`${e}-section`)?I(e):(console.warn(`Section "${e}" not found, defaulting to profile`),p.sentry().captureException(new Error(`Invalid account section hash: ${e}`)),window.location.hash="#profile",I("profile")):I("profile")}function $(){const e=document.getElementById("delete-nav-item");e&&e.classList.remove("d-none");const t=document.getElementById("mobile-nav-select");if(t&&!t.querySelector('option[value="delete"]')){const e=document.createElement("option");e.value="delete",e.textContent="Delete Account",e.className="text-danger",t.appendChild(e)}}function I(e){const t=document.getElementById("loading-section");if(t&&!t.classList.contains("d-none"))return;b.forEach(e=>{e.classList.add("d-none")});const n=document.getElementById(`${e}-section`);n&&(n.classList.remove("d-none"),function(e){gtag("event","account_section_view",{section_name:e}),fbq("trackCustom","AccountSectionView",{section:e}),ttq.track("ViewContent",{content_id:`account-${e}`,content_type:"product",content_name:`Account ${e}`})}(e)),y.forEach(t=>{t.dataset.section===e?t.classList.add("active"):t.classList.remove("active")});const o=document.getElementById("mobile-nav-select");o&&(o.value=e);const a=w[e];a&&a.onShow&&a.onShow()}},2752:(e,t,n)=>{n.r(t),n.d(t,{init:()=>i,loadData:()=>s});let o=null,a=null;async function i(e){o=e,function(){const e=document.getElementById("upgrade-plan-btn"),t=document.getElementById("manage-plan-btn");e&&e.addEventListener("click",()=>{window.location.href="/pricing"}),t&&t.addEventListener("click",()=>{window.location.href="/pricing"})}()}async function s(e,t){e&&(a=t,function(e){const t=e.subscription,n=document.getElementById("current-plan-name"),o=document.getElementById("plan-status"),i=document.getElementById("upgrade-plan-btn"),s=document.getElementById("manage-plan-btn");if(n){const e=t.product||"basic";let o="Free";a?.products?.[e]?o=a.products[e].name||e:"basic"!==e&&(o=e.charAt(0).toUpperCase()+e.slice(1)),n.textContent=o}if(document.querySelectorAll(".plan-action-btn").forEach(e=>e.classList.add("d-none")),o)if("suspended"===t.status||t.paymentIssue?.hasIssue){if(o.className="badge bg-danger",o.textContent="Payment Issue",s&&s.classList.remove("d-none"),t.paymentIssue?.message){const e=document.getElementById("billing-details");e&&(e.innerHTML=`\n            <div class="alert alert-danger mb-3">\n              <strong>Payment Failed:</strong> ${t.paymentIssue.message}\n            </div>\n          `)}}else if(t.cancellation?.requested&&"active"===t.status){const e=t.cancellation.effectiveAt;if(o.className="badge bg-warning",o.textContent="Cancelling",e){const t=Math.ceil((1e3*e-Date.now())/864e5);t>0&&(o.textContent+=` (${t} days left)`)}s&&s.classList.remove("d-none")}else if("active"===t.status||!0===t.access)o.className="badge bg-success",o.textContent="Active",s&&s.classList.remove("d-none");else if("trialing"===t.status){const e=t.trial?.endedAt||t.trial?.expires?.timestamp;if(o.className="badge bg-info",o.textContent="Trial",e){const t=Math.ceil((new Date(e)-new Date)/864e5);t>0&&(o.textContent+=` (${t} days left)`)}s&&i.classList.remove("d-none")}else"cancelled"===t.status?(o.className="badge bg-secondary",o.textContent="Cancelled",i&&i.classList.remove("d-none")):(o.className="badge bg-secondary",o.textContent="Basic",i&&i.classList.remove("d-none"))}(e),function(e){const t=e.subscription;if(t.billing&&!t.paymentIssue?.hasIssue){const e=document.getElementById("billing-details");if(e){const n=t.billing.nextBillingDate,o=t.billing.amount,a=t.billing.currency||"usd",i=t.frequency||t.billing.interval;let s="";if(n&&o){const e=new Date(1e3*n).toLocaleDateString(),c=new Intl.NumberFormat("en-US",{style:"currency",currency:a.toUpperCase()}).format(o/100);s=t.cancellation?.requested?`\n            <div class="alert alert-warning mb-3">\n              <strong>Subscription ending:</strong> Your subscription will end on ${e}.\n              You'll continue to have access until then.\n            </div>\n          `:`\n            <p class="mb-1"><strong>Next billing:</strong> ${e}</p>\n            <p class="mb-1"><strong>Amount:</strong> ${c} / ${i}</p>\n          `}e.innerHTML=s}}}(e),function(e){const t=e.subscription||{},n=document.getElementById("usage-metrics-container");if(!n)return;const o=t.product||"basic",i=a?.products?.[o],s=i?.limits||{};if(n.innerHTML="",!i||!s||0===Object.keys(s).length)return void(n.innerHTML='<div class="text-muted">Usage tracking not available for this plan</div>');let r=e.usage||{};Object.entries(s).forEach(([e,t])=>{const o=(r[e]||{}).period||0,a=Math.min(100,Math.round(o/t*100));let i="bg-success";a>=80?i="bg-danger":a>=50&&(i="bg-warning");const s=function(e){return{requests:"API Requests",tokens:"Tokens",storage:"Storage",bandwidth:"Bandwidth",users:"Users",projects:"Projects"}[e]||e.charAt(0).toUpperCase()+e.slice(1)}(e),l=`\n      <div class="mb-3">\n        <div class="d-flex justify-content-between align-items-center mb-1">\n          <small class="text-muted fw-semibold">${s}</small>\n          <small class="text-muted">${c(e,o)} / ${c(e,t)}</small>\n        </div>\n        <div class="progress" style="height: 20px;">\n          <div class="progress-bar ${i}" role="progressbar"\n               style="width: ${a}%"\n               aria-valuenow="${a}"\n               aria-valuemin="0"\n               aria-valuemax="100">\n            ${a}%\n          </div>\n        </div>\n      </div>\n    `;n.innerHTML+=l}),""===n.innerHTML&&(n.innerHTML='<div class="text-muted">No usage data available</div>')}(e))}function c(e,t){return"storage"===e||"bandwidth"===e?function(e,t=2){if(0===e)return"0 Bytes";const n=t<0?0:t,o=Math.floor(Math.log(e)/Math.log(1024));return parseFloat((e/Math.pow(1024,o)).toFixed(n))+" "+["Bytes","KB","MB","GB","TB"][o]}(t):t.toLocaleString()}},7550:(e,t,n)=>{n.r(t),n.d(t,{init:()=>s,loadData:()=>c});var o=n(2984);let a=null,i=null;function s(e){i=e,a=new o.A("#profile-form",{autoReady:!1,submittingText:"Saving..."}),a.on("submit",async({data:e})=>{await async function(e){if(e.personal?.birthday){const t=new Date(e.personal.birthday);e.personal.birthday={timestamp:t.toISOString(),timestampUNIX:Math.floor(t.getTime()/1e3)}}else e.personal.birthday={timestamp:"1970-01-01T00:00:00.000Z",timestampUNIX:0};e.personal?.telephone?.countryCode&&(e.personal.telephone.countryCode=parseInt(e.personal.telephone.countryCode.replace("+",""))||0),e.personal?.telephone?.national&&(e.personal.telephone.national=parseInt(e.personal.telephone.national.replace(/\D/g,""))||0),delete e.auth,console.log("Profile update data:",e);const t=i.auth().getUser(),n=i.firestore().doc(`users/${t.uid}`);await n.set(e,{merge:!0}),console.log("Profile successfully updated in Firestore")}(e),a.showSuccess("Profile updated successfully!")}),function(){const e=document.getElementById("copy-uid-btn");e&&e.addEventListener("click",r)}()}function c(e,t){if(!e)return;let n="";e.personal?.birthday?.timestamp&&e.personal.birthday.timestampUNIX>0&&(n=new Date(e.personal.birthday.timestamp).toISOString().split("T")[0]);let o="+1";e.personal?.telephone?.countryCode&&(o=`+${e.personal.telephone.countryCode}`);const i={auth:{email:e.auth?.email||t?.email||"",uid:t?.uid||e.auth?.uid||""},personal:{name:{first:e.personal?.name?.first||"",last:e.personal?.name?.last||""},birthday:n,gender:e.personal?.gender||"",location:{country:e.personal?.location?.country||"",region:e.personal?.location?.region||"",city:e.personal?.location?.city||""},telephone:{countryCode:o,national:e.personal?.telephone?.national?.toString()||""}}};a.setData(i),a.ready(),function(e){const t=document.getElementById("profile-join-date");if(!t)return;const n=e?.metadata?.creationTime;if(n){const e=new Date(n).toLocaleDateString("en-US",{month:"long",year:"numeric"});t.textContent=`Member since ${e}`}else t.textContent="Member"}(t),function(e){const t=e?.roles||{},n=e?.subscription||e?.plan;Object.entries({admin:"badge-admin",developer:"badge-coder",moderator:"badge-moderator",betaTester:"badge-beta",vip:"badge-vip"}).forEach(([e,n])=>{const o=document.getElementById(n);o&&(t[e]?o.classList.remove("d-none"):o.classList.add("d-none"))});const o=document.getElementById("badge-premium");o&&("active"===n?.status||"trialing"===n?.status||!0===n?.active?o.classList.remove("d-none"):o.classList.add("d-none"))}(e)}async function r(){const e=document.getElementById("uid-input"),t=document.getElementById("copy-uid-btn");if(e&&e.value)try{await i.utilities().clipboardCopy(e);const n=t.querySelector(".button-text"),o=n.textContent;n.textContent="Copied!",t.classList.remove("btn-outline-adaptive"),t.classList.add("btn-success"),setTimeout(()=>{n.textContent=o,t.classList.remove("btn-success"),t.classList.add("btn-outline-adaptive")},2e3)}catch(e){console.error("Failed to copy UID:",e)}}},7674:(e,t,n)=>{n.r(t),n.d(t,{init:()=>a,loadData:()=>i});let o=null;function a(e){o=e,function(){const e=document.getElementById("invite-team-member-btn");e&&e.addEventListener("click",c),document.addEventListener("click",e=>{const t=e.target.dataset.action,n=e.target.dataset.member;t&&n&&(e.preventDefault(),async function(e,t){switch(e){case"change-role":!async function(e){const t=prompt("Enter new role (admin, member, viewer):");if(t&&["admin","member","viewer"].includes(t))try{console.log("Changing role for member:",e,"to",t),o.utilities().showNotification("Member role updated successfully","success")}catch(e){console.error("Failed to update member role:",e),o.utilities().showNotification("Failed to update member role. Please try again.","danger")}}(t);break;case"remove":!async function(e){if(confirm("Are you sure you want to remove this member from your team?"))try{console.log("Removing member:",e),o.utilities().showNotification("Member removed successfully","success")}catch(e){console.error("Failed to remove member:",e),o.utilities().showNotification("Failed to remove member. Please try again.","danger")}}(t)}}(t,n))})}()}function i(e){e&&(function(e){const t=document.getElementById("team-list");if(!t)return;const n=o.auth().getUser(),a=[{id:n?.uid,email:n?.email,name:"You",role:"owner",status:"active",joinedAt:Date.now()},...e].map(e=>{return`\n    <div class="list-group-item">\n      <div class="d-flex justify-content-between align-items-center">\n        <div>\n          <strong>${e.name||e.email}</strong>\n          ${"owner"===e.role?"":`<small class="text-muted d-block">${e.email}</small>`}\n          <small class="text-muted">${s(e.role)}</small>\n        </div>\n        <div class="d-flex align-items-center">\n          <span class="badge bg-${t=e.role,{owner:"primary",admin:"success",member:"secondary",viewer:"light"}[t]||"secondary"} me-2">${s(e.role)}</span>\n          ${"owner"!==e.role?function(e){return"pending"===e.status?'\n      <button class="btn btn-sm btn-outline-secondary" disabled>\n        Pending\n      </button>\n    ':`\n    <div class="dropdown">\n      <button class="btn btn-sm btn-outline-secondary dropdown-toggle" type="button" data-bs-toggle="dropdown">\n        Actions\n      </button>\n      <ul class="dropdown-menu">\n        <li><a class="dropdown-item" href="#" data-action="change-role" data-member="${e.id}">Change Role</a></li>\n        <li><hr class="dropdown-divider"></li>\n        <li><a class="dropdown-item text-danger" href="#" data-action="remove" data-member="${e.id}">Remove Team Member</a></li>\n      </ul>\n    </div>\n  `}(e):""}\n        </div>\n      </div>\n    </div>\n  `;var t}).join("");t.innerHTML=a||'<p class="text-muted">No team members yet.</p>'}(e.team?.members||[]),function(e){const t=document.getElementById("pending-invites");if(!t||0===e.length)return;const n=e.map(e=>{return`\n    <div class="list-group-item">\n      <div class="d-flex justify-content-between align-items-center">\n        <div>\n          <strong>${e.email}</strong>\n          <small class="text-muted d-block">Invited ${t=e.invitedAt,t?new Date(t).toLocaleDateString():"Unknown"}</small>\n        </div>\n        <div>\n          <button class="btn btn-sm btn-outline-danger" onclick="cancelInvite('${e.id}')">\n            Cancel Invite\n          </button>\n        </div>\n      </div>\n    </div>\n  `;var t}).join("");t.innerHTML=n}(e.team?.invites||[]))}function s(e){return{owner:"Owner",admin:"Admin",member:"Member",viewer:"Viewer"}[e]||"Member"}async function c(){const e=prompt("Enter the email address of the person you want to invite:");if(e&&e.includes("@"))try{console.log("Inviting member:",e),o.utilities().showNotification(`Invitation sent to ${e}`,"success")}catch(e){console.error("Failed to invite member:",e),o.utilities().showNotification("Failed to send invitation. Please try again.","danger")}}},8337:(e,t,n)=>{n.r(t),n.d(t,{init:()=>a,loadData:()=>i});let o=null;function a(e){o=e,function(){const e=document.getElementById("copy-referral-code-btn");e&&e.addEventListener("click",s)}()}function i(e){e&&(function(e){const t=document.getElementById("referral-code-input");if(t)if(e){const n=window.location.origin;t.value=`${n}?ref=${e}`}else t.value="No referral link available"}(e.affiliate?.code),function(e){const t=document.getElementById("total-referrals"),n=document.getElementById("recent-referrals"),o=document.getElementById("referrals-badge"),a=document.getElementById("referrals-list");let i=e||[];if("true"===new URLSearchParams(window.location.search).get("_dev_prefill")){console.log("Adding fake referral data for testing");const e=function(){const e=Date.now(),t=864e5;return[{uid:"user_k9m2n8p4q1r7",timestamp:e-72e5,timestampUNIX:Math.floor((e-72e5)/1e3)},{uid:"user_x3y7z2a5b9c6",timestamp:e-288e5,timestampUNIX:Math.floor((e-288e5)/1e3)},{uid:"user_t4u8i2o6p1a5",timestamp:e-t,timestampUNIX:Math.floor((e-t)/1e3)},{uid:"user_f7g1h5j9k3l8",timestamp:e-3*t,timestampUNIX:Math.floor((e-3*t)/1e3)},{uid:"user_q2w6e1r5t9y4",timestamp:e-7*t,timestampUNIX:Math.floor((e-7*t)/1e3)},{uid:"user_m8n2b6v1c5x9",timestamp:e-14*t,timestampUNIX:Math.floor((e-14*t)/1e3)},{uid:"user_a3s7d1f5g9h4",timestamp:e-25*t,timestampUNIX:Math.floor((e-25*t)/1e3)},{uid:"user_z9x5c1v7b3n8",timestamp:e-35*t,timestampUNIX:Math.floor((e-35*t)/1e3)},{uid:"user_p6o2i8u4y1t5",timestamp:e-45*t,timestampUNIX:Math.floor((e-45*t)/1e3)},{uid:"user_l1k9j7h5g3f2",timestamp:e-60*t,timestampUNIX:Math.floor((e-60*t)/1e3)},{uid:"user_e4r8t2y6u1i5",timestamp:e-90*t,timestampUNIX:Math.floor((e-90*t)/1e3)},{uid:"user_w7q1a5s9d3f6",timestamp:e-120*t,timestampUNIX:Math.floor((e-120*t)/1e3)}]}();i=[...i,...e]}if(!i||!Array.isArray(i)||0===i.length)return t&&(t.textContent="0"),n&&(n.textContent="0"),o&&(o.textContent="0"),void(a&&(a.innerHTML='\n        <div class="text-center text-muted py-3">\n          No referrals yet. Share your code to get started!\n        </div>\n      '));const s=i.length,c=new Date,r=new Date(c.getFullYear(),c.getMonth(),1).getTime(),l=i.filter(e=>(e.timestamp||1e3*e.timestampUNIX)>=r).length;t&&(t.textContent=s.toString()),n&&(n.textContent=l.toString()),o&&(o.textContent=s.toString());const d=[...i].sort((e,t)=>{const n=e.timestamp||1e3*e.timestampUNIX||0;return(t.timestamp||1e3*t.timestampUNIX||0)-n});if(a)if(0===d.length)a.innerHTML='\n        <div class="text-center text-muted py-3">\n          No referrals yet. Share your code to get started!\n        </div>\n      ';else{const e=d.map((e,t)=>{const n=e.timestamp||1e3*e.timestampUNIX,o=n?new Date(n):null,a=o?function(e){return e.toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})}(o):"Unknown date",i=o?function(e){return e.toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit"})}(o):"";return`\n          <div class="list-group-item px-0">\n            <div class="d-flex justify-content-between align-items-center">\n              <div>\n                <div class="d-flex align-items-center">\n                  <span class="badge bg-secondary me-2">#${d.length-t}</span>\n                  <div>\n                    <strong class="font-monospace small">${e.uid||"Unknown User"}</strong>\n                    <div class="text-muted small">${a}${i?` at ${i}`:""}</div>\n                  </div>\n                </div>\n              </div>\n              <div class="text-end">\n                ${function(e){if(!e)return'<small class="text-muted">Unknown</small>';const t=Date.now()-e;if(t<6e4)return'<small class="text-success">Just now</small>';if(t<36e5){const e=Math.floor(t/6e4);return`<small class="text-muted">${e} min${e>1?"s":""} ago</small>`}if(t<864e5){const e=Math.floor(t/36e5);return`<small class="text-muted">${e} hour${e>1?"s":""} ago</small>`}if(t<6048e5){const e=Math.floor(t/864e5);return`<small class="text-muted">${e} day${e>1?"s":""} ago</small>`}if(t<2592e6){const e=Math.floor(t/6048e5);return`<small class="text-muted">${e} week${e>1?"s":""} ago</small>`}const n=Math.floor(t/2592e6);if(n<12)return`<small class="text-muted">${n} month${n>1?"s":""} ago</small>`;const o=Math.floor(n/12);return`<small class="text-muted">${o} year${o>1?"s":""} ago</small>`}(n)}\n              </div>\n            </div>\n          </div>\n        `}).join("");a.innerHTML=e}}(e.affiliate?.referrals))}async function s(){const e=document.getElementById("referral-code-input"),t=document.getElementById("copy-referral-code-btn");if(e&&e.value&&"No referral link available"!==e.value)try{await o.utilities().clipboardCopy(e);const n=t.querySelector(".button-text"),a=n.textContent;n.textContent="Copied!",t.classList.remove("btn-primary"),t.classList.add("btn-success"),setTimeout(()=>{n.textContent=a,t.classList.remove("btn-success"),t.classList.add("btn-primary")},2e3)}catch(e){console.error("Failed to copy referral link:",e),o.utilities().showNotification("Failed to copy referral link","danger")}else o.utilities().showNotification("No referral link to copy","warning")}},8704:(e,t,n)=>{n.r(t),n.d(t,{init:()=>c,loadData:()=>r,onShow:()=>l});var o=n(2984),a=n(5460);let i=null,s=null;async function c(e){i=e,function(){const e=document.getElementById("delete-account-form"),t=document.getElementById("delete-confirm-checkbox"),n=document.getElementById("delete-account-btn"),c=document.getElementById("cancel-delete-btn");e&&t&&n&&(s=new o.A("#delete-account-form",{allowResubmit:!1,submittingText:"Deleting account...",submittedText:"Account Deleted!"}),t.addEventListener("change",e=>{n.disabled=!e.target.checked}),c&&c.addEventListener("click",()=>{window.location.hash="profile"}),s.on("submit",async({data:e})=>{if(!t.checked)throw new Error("Please confirm that you understand this action is permanent.");if(await new Promise(e=>setTimeout(e,1)),"DELETE"!==prompt('Are you absolutely sure you want to delete your account?\n\nThis action CANNOT be undone.\n\nType "DELETE" to confirm:'))throw new Error('Account deletion cancelled. You must type "DELETE" exactly to confirm.');if(!confirm("This is your last chance to cancel.\n\nAre you sure you want to permanently delete your account?"))throw new Error("Account deletion cancelled.");const n=await(0,a.A)(i.getApiUrl(),{method:"POST",timeout:3e4,response:"json",tries:2,body:{command:"user:delete",payload:{reason:e.reason||"",confirmed:!0}}});if(console.log("Delete account response:",n),!n.success)throw new Error(n.message||"Failed to delete account");s.showSuccess("Your account has been successfully deleted. You will now be signed out."),await i.auth().signOut(),setTimeout(()=>{window.location.href="/"},1500)}))}()}async function r(){}function l(){}},9668:(e,t,n)=>{n.r(t),n.d(t,{init:()=>s,loadData:()=>c});var o=n(2984),a=n(5460);let i=null;function s(e){i=e,function(){const e=document.getElementById("copy-api-key-btn");e&&e.addEventListener("click",l)}(),function(){const e=new o.A("#reset-api-key-form",{allowResubmit:!1,submittingText:"Resetting...",submittedText:"Reset!"});e.on("submit",async()=>{if(await new Promise(e=>setTimeout(e,1)),!confirm("Are you sure you want to reset your API key? This will invalidate your current key and any applications using it will stop working."))throw new Error("API key reset cancelled.");const t=i.getApiUrl()+"/backend-manager",n=await(0,a.A)(t,{method:"POST",timeout:3e4,response:"json",tries:2,body:{command:"user:regenerate-api-keys"}});if(!n.privateKey)throw new Error(n.message||"Failed to reset API key");r(n.privateKey),e.showSuccess("API key has been reset successfully!")})}()}function c(e){e&&r(e.api?.privateKey)}function r(e){const t=document.getElementById("api-key-input");t&&(t.value=e||"No API key generated")}async function l(){const e=document.getElementById("api-key-input"),t=document.getElementById("copy-api-key-btn");if(e&&e.value&&"No API key generated"!==e.value)try{await i.utilities().clipboardCopy(e);const n=t.querySelector(".button-text"),o=n.textContent;n.textContent="Copied!",t.classList.remove("btn-outline-adaptive"),t.classList.add("btn-success"),setTimeout(()=>{n.textContent=o,t.classList.remove("btn-success"),t.classList.add("btn-outline-adaptive")},2e3)}catch(e){console.error("Failed to copy API key:",e),i.utilities().showNotification("Failed to copy API key","danger")}else i.utilities().showNotification("No API key to copy","warning")}},9978:(e,t,n)=>{n.r(t),n.d(t,{init:()=>u,loadData:()=>m,onShow:()=>f});var o=n(2984),a=n(5460);let i=null,s=null,c=null,r=new Map;const l=["google","discord","github","twitter","facebook"];function d(){return i.getApiUrl()+"/backend-manager"}async function u(e){i=e}async function m(e,t){e&&(c=e,s=t,g())}function g(){console.log("[DEBUG] displayConnections() called");const e=document.getElementById("connections-loading");if(e&&e.classList.add("d-none"),!s)return console.log("[DEBUG] No appData, showing loading state"),void(e&&e.classList.remove("d-none"));const t=s?.oauth2||{},n=c?.oauth2||{};console.log("[DEBUG] Available OAuth providers:",t),console.log("[DEBUG] User connections:",n);let i=!1;l.forEach(e=>{console.log(`[DEBUG] Processing provider: ${e}`);const l=t[e],u=document.getElementById(`connection-${e}`);if(console.log(`[DEBUG] ${e} - providerSettings:`,l),console.log(`[DEBUG] ${e} - providerSettings.enabled:`,l?.enabled),console.log(`[DEBUG] ${e} - $providerElement exists:`,!!u),!u)return void console.warn(`[DEBUG] ${e} - Provider element not found in DOM`);const m=l&&!1!==l.enabled;if(console.log(`[DEBUG] ${e} - isEnabled:`,m),m){i=!0,console.log(`[DEBUG] ${e} - Removing d-none class`),u.classList.remove("d-none"),console.log(`[DEBUG] ${e} - About to initialize FormManager`),function(e){const t=`connection-form-${e}`;if(!document.getElementById(t))return void console.warn(`Form not found for provider: ${e}`);if(r.has(e))return void console.log(`FormManager already initialized for ${e}`);console.log(`Initializing FormManager for ${e}`);const n=new o.A(`#${t}`,{submittingText:"Connecting..."});r.set(e,n),n.on("statechange",({state:t})=>{if(console.log(`[DEBUG] ${e} - FormManager state changed to:`,t),"ready"===t){console.log(`[DEBUG] ${e} - FormManager is ready, updating button status`);const t=c?.oauth2?.[e],n=s?.oauth2?.[e];p(e,t,n)}}),n.on("submit",async({data:t,$submitButton:n})=>{const o=t.provider,i=n?.getAttribute("data-action");if(console.log(`[DEBUG] ${e} - Form submitted. Action:`,i,"Provider:",o),"connect"===i)await async function(e){const t=s?.oauth2?.[e];if(!t||!1===t.enabled)throw new Error("This connection service is not available.");const n=t.scope||[],o=await(0,a.A)(d(),{method:"POST",timeout:3e4,response:"json",tries:2,body:{command:"user:oauth2",payload:{redirect:!1,provider:e,state:"authorize",scope:n,referrer:window.location.href}}});if(console.log("OAuth connect response:",o),!o.url)throw new Error(o.message||"Failed to get authorization URL");window.location.href=o.url}(o);else if("disconnect"===i){const e=await async function(e){const t=e.charAt(0).toUpperCase()+e.slice(1);if(await new Promise(e=>setTimeout(e,1)),!confirm(`Are you sure you want to disconnect your ${t} account?`))throw new Error("Disconnection cancelled");const n=(s?.oauth2?.[e]||{}).scope||[],o=await(0,a.A)(d(),{method:"POST",timeout:3e4,response:"json",tries:2,body:{command:"user:oauth2",payload:{redirect:!1,provider:e,state:"deauthorize",scope:n,referrer:window.location.href}}});if(console.log("OAuth disconnect response:",o),o.success)return c.oauth2&&c.oauth2[e]&&delete c.oauth2[e],!0;throw new Error(o.message||"Failed to disconnect")}(o);if(e){const e=s?.oauth2?.[o];p(o,null,e)}}})}(e);const t=n[e];console.log(`[DEBUG] ${e} - userConnection:`,t),console.log(`[DEBUG] ${e} - About to update provider status`),p(e,t,l)}else console.log(`[DEBUG] ${e} - Provider disabled, adding d-none class`),u.classList.add("d-none")});const u=document.getElementById("connections-empty");u&&(i?u.classList.add("d-none"):u.classList.remove("d-none"))}function p(e,t,n){console.log(`[DEBUG] updateProviderStatus() called for ${e}`),console.log(`[DEBUG] ${e} - userConnection:`,t),console.log(`[DEBUG] ${e} - userConnection truthy:`,!!t),console.log(`[DEBUG] ${e} - userConnection.identity:`,t?.identity),console.log(`[DEBUG] ${e} - providerSettings:`,n);const o=document.getElementById(`${e}-connection-status`),a=document.getElementById(`${e}-connection-description`),i=document.getElementById(`connection-form-${e}`),s=i?.querySelector('button[data-action="connect"]'),c=i?.querySelector('button[data-action="disconnect"]');console.log(`[DEBUG] ${e} - DOM elements found:`,{$status:!!o,$description:!!a,$form:!!i,$connectButton:!!s,$disconnectButton:!!c});const r=t&&t.identity;if(console.log(`[DEBUG] ${e} - isConnected:`,r),a){const t={google:"Enable single sign-on with your Google account",discord:"Connect to access Discord community features",github:"Link your GitHub account for repository access",twitter:"Share updates and connect with Twitter",facebook:"Connect your Facebook account for social features"},o=n?.description||t[e]||`Connect your ${e.charAt(0).toUpperCase()+e.slice(1)} account`;a.textContent=o,a.classList.remove("d-none")}if(o)if(r){const e=(l=t)&&l.identity?l.identity.global_name||l.identity.username||l.identity.name||l.identity.email||l.identity.id||"Connected":"Unknown";let n=`Connected: ${e}`;t.updated&&t.updated.timestamp&&(n=`${e} â€¢ ${new Date(t.updated.timestamp).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})}`),o.textContent=n,o.classList.remove("d-none")}else o.textContent="",o.classList.add("d-none");var l;s&&c&&(console.log(`[DEBUG] ${e} - Updating buttons. isConnected:`,r),r?(s.classList.add("d-none"),c.classList.remove("d-none"),console.log(`[DEBUG] ${e} - Showing disconnect button`)):(s.classList.remove("d-none"),c.classList.add("d-none"),console.log(`[DEBUG] ${e} - Showing connect button`)))}function f(){c&&s&&g()}}}]);