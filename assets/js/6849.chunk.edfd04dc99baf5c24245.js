(self.webpackChunkultimate_jekyll=self.webpackChunkultimate_jekyll||[]).push([[6002,6849],{634:()=>{},726:(e,t,a)=>{"use strict";function o(e,t){const{webManager:a}=e,o=a.config.lazyLoading.config,n=new WeakSet;let s=null;function r(e){const t=new URL(e,window.location.href);return t.searchParams.set("cb",a.config.buildTime),t.toString()}function i(e,t){e.forEach(e=>{if(!e.isIntersecting)return;const a=e.target;t.unobserve(a);const o=a.tagName.toLowerCase();"video"!==o&&"audio"!==o||!a.dataset.lazySourcesReady?c(a):a.querySelectorAll("source[data-lazy]").forEach(e=>c(e))})}function c(e){if(n.has(e))return;e.classList.remove(o.errorClass),e.classList.add(o.loadingClass);const t=e.getAttribute("data-lazy");if(!t)return void l(e);const s=t.indexOf(" ");if(s<=0)return void d(`Invalid format: ${t}`,e);const i=t.slice(0,s).trim(),c=t.slice(s+1).trim();if(c)switch(e.removeAttribute("data-lazy"),i){case"@src":!function(e,t){const a=e.tagName.toLowerCase();if(t=r(t),"img"===a){e.src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7";const a=new Image;a.onload=()=>{e.src=t,l(e)},a.onerror=()=>{d(`Failed to load image: ${t}`,e)},a.src=t,a.complete&&0!==a.naturalHeight&&a.onload()}else if("iframe"===a||"video"===a){e.src=t;const o="video"===a?"loadeddata":"load";e.addEventListener(o,()=>{l(e)},{once:!0}),e.addEventListener("error",()=>{d(`Failed to load ${e.tagName.toLowerCase()}: ${t}`,e)},{once:!0}),"video"===a&&e.load()}else if("source"===a){e.src=t;const a=e.closest("video, audio");if(a){a.load();const n=a.closest("[data-lazy-load-container]");a.addEventListener("loadeddata",()=>{l(e),n&&(n.classList.remove(o.loadingClass),n.classList.add(o.loadedClass))},{once:!0}),a.addEventListener("error",()=>{d(`Failed to load source: ${t}`,e),n&&(n.classList.remove(o.loadingClass),n.classList.add(o.errorClass))},{once:!0})}else l(e)}else e.src=t,l(e)}(e,c);break;case"@srcset":!function(e,t){const a=e.tagName.toLowerCase();if(t=t.split(",").map(e=>{const[t,a]=e.trim().split(/\s+/),o=r(t);return a?`${o} ${a}`:o}).join(", "),"img"===a){const a=new Image;a.onload=()=>{e.srcset=t,l(e)},a.onerror=()=>{d(`Failed to load image: ${t}`,e)},a.srcset=t}else if("source"===a){e.srcset=t;const a=e.closest("picture");if(a){const e=a.querySelector("img");e&&e.src&&(e.src=e.src)}l(e)}else e.srcset=t,l(e)}(e,c);break;case"@bg":!function(e,t){t=r(t);const a=new Image;a.onload=()=>{e.style.backgroundImage=`url('${t}')`,l(e)},a.onerror=()=>{d(`Failed to load background image: ${t}`,e)},a.src=t}(e,c);break;case"@class":!function(e,t){if(t.includes("animation-")&&(e.classList.add("lazy-loaded-no-fade"),"true"===document.documentElement.getAttribute("data-page-loading"))){const t=e.getBoundingClientRect();if(t.top<window.innerHeight&&t.bottom>=0)return void l(e)}const a=t.split(/\s+/).filter(e=>e);e.classList.add(...a),l(e)}(e,c);break;case"@html":!function(e,t){e.innerHTML=t,l(e)}(e,c);break;case"@script":!function(e,t){try{const o=JSON.parse(t),{src:n,attributes:s}=o;if(!n)return void d("No src provided in @script data",e);const i={src:r(n),attributes:s,parent:e};a.dom().loadScript(i).then(()=>{l(e)}).catch(t=>{d(`Failed to load script: ${n} - ${t.message}`,e)})}catch(t){d(`Failed to parse @script JSON: ${t.message}`,e)}}(e,c);break;default:d(`Unknown lazy load type: ${i}`,e)}else d(`Empty value in data-lazy: ${t}`,e)}function l(e){n.add(e),e.classList.remove(o.loadingClass),e.classList.add(o.loadedClass)}function d(e,t){n.add(t),t.classList.remove(o.loadingClass),t.classList.add(o.errorClass),console.error("Failed to lazy load element",e,t)}function u(){const e=document.querySelectorAll(o.selector),t=new Set;e.forEach(e=>{if(!n.has(e)){if("source"===e.tagName.toLowerCase()){const a=e.closest("video, audio, picture");return a&&"picture"===a.tagName.toLowerCase()?void s.observe(e):void(a&&!t.has(a)&&(t.add(a),s.observe(a),a.dataset.lazySourcesReady="true"))}s.observe(e)}})}a.dom().ready().then(()=>{"IntersectionObserver"in window?(s=new IntersectionObserver(i,{rootMargin:o.rootMargin,threshold:o.threshold}),u(),"MutationObserver"in window&&new MutationObserver(()=>{u()}).observe(document.body,{childList:!0,subtree:!0})):document.querySelectorAll(o.selector).forEach(e=>{c(e)})})}a.d(t,{default:()=>o})},938:()=>{},986:(e,t,a)=>{var o={"./auth":[8595],"./auth.js":[8595],"./chatsy":[6671,6671],"./chatsy.js":[6671,6671],"./complete":[9038],"./complete.js":[9038],"./cookieconsent":[3529,3529],"./cookieconsent.js":[3529,3529],"./exit-popup":[4378,4378],"./exit-popup.js":[4378,4378],"./initialize":[435,435],"./initialize.js":[435,435],"./lazy-loading":[726],"./lazy-loading.js":[726],"./query-strings":[1669],"./query-strings.js":[1669],"./service-worker":[1329],"./service-worker.js":[1329],"./social-sharing":[8795,8795],"./social-sharing.js":[8795,8795]};function n(e){if(!a.o(o,e))return Promise.resolve().then(()=>{var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t});var t=o[e],n=t[0];return Promise.all(t.slice(1).map(a.e)).then(()=>a(n))}n.keys=()=>Object.keys(o),n.id=986,e.exports=n},1329:(e,t,a)=>{"use strict";function o(e,t){const{webManager:a}=e;if(!("serviceWorker"in navigator)||!navigator.serviceWorker.controller)return void console.warn("Service Worker not available or not controlled by a Service Worker.");const o=t.paths.pagePath||"/",n=new MessageChannel;n.port1.onmessage=e=>{"success"===e.data.status&&console.log("Page cached for offline use:",o)},navigator.serviceWorker.controller.postMessage({command:"update-cache",payload:{pages:[o]}},[n.port2])}a.d(t,{default:()=>o})},1669:(e,t,a)=>{"use strict";function o(e,t){const{webManager:a}=e;a.dom().ready().then(()=>{!function(){const e=new URLSearchParams(window.location.search);(function(e){const t=e.get("aff")||e.get("ref");if(!t)return;const o={code:t,timestamp:(new Date).toISOString(),url:window.location.href,page:window.location.pathname};a.storage().set("marketing.affiliate",o)})(e),function(e){const t={tags:{}};let o=!1;["utm_source","utm_medium","utm_campaign","utm_term","utm_content"].forEach(a=>{const n=e.get(a);n&&(t.tags[a]=n,o=!0)}),o&&(t.timestamp=(new Date).toISOString(),t.url=window.location.href,t.page=window.location.pathname,a.storage().set("marketing.utm",t))}(e)}()})}a.d(t,{default:()=>o})},2480:()=>{},3005:()=>{},4050:()=>{},5043:()=>{},5460:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});var o=a(4289),n=a.n(o);const s=async function(e,t={}){window.Manager;const o=JSON.parse(JSON.stringify(t)),{getAuth:s}=await Promise.all([a.e(9943),a.e(7480)]).then(a.bind(a,7480)),r=s().currentUser;if(!r)throw new Error("No authenticated user found");const i=await r.getIdToken();return o.headers||(o.headers={}),o.headers.Authorization="Bearer "+i,n()(e,o)}},6600:()=>{},6704:(e,t,a)=>{"use strict";a.d(t,{default:()=>c});var o=a(8595),n=a(726),s=a(1669),r=a(1329),i=a(9038);async function c(e,t){const{webManager:c}=e;window.Manager=e,console.log("Global module loaded successfully (assets/js/ultimate-jekyll-manager.js)"),(0,o.default)(e,t),(0,n.default)(e,t),(0,s.default)(e,t),(0,r.default)(e,t);const l=[{path:"chatsy.js",configKey:"chatsy"},{path:"cookieconsent.js",configKey:"cookieConsent"},{path:"exit-popup.js",configKey:"exitPopup"},{path:"social-sharing.js",configKey:"socialSharing"}],d=[];for(const o of l){const n=c.config[o.configKey];n?.enabled?d.push(a(986)(`./${o.path}`).then(({default:a})=>a(e,t)).catch(e=>console.error(`Failed to load ${o.path}:`,e))):console.log(`Skipping ${o.path} (disabled in config)`)}d.push(a.e(3072).then(a.bind(a,3072)).catch(e=>console.error("Failed to load theme:",e))),await Promise.all(d),(0,i.default)(e,t)}},7664:()=>{},8466:()=>{},8595:(e,t,a)=>{"use strict";a.d(t,{default:()=>n});var o=a(5460);function n(e,t){const{webManager:a}=e,n=a.config.auth.config,r=n.policy,i=n.redirects.authenticated,c=n.redirects.unauthenticated;console.log("[Auth] policy:",r,{authenticated:i,unauthenticated:c});let l=!1;try{a.auth().listen({},async e=>{const t=e.user,n=new URL(window.location.href),d=n.searchParams.get("authReturnUrl"),u=n.searchParams.get("authSignout");if(console.log("[Auth] state changed:",e),function(e,t){const a=e?.uid,o=e?.email,n=t.config.tracking["meta-pixel"];if(!a)return gtag("set",{user_id:null}),fbq("init",n,{}),void ttq.identify({});gtag("set",{user_id:a,user_properties:{email_domain:o?o.split("@")[1]:void 0}}),fbq("init",n,{external_id:a,em:o}),ttq.identify({external_id:a,email:o})}(t,a),"true"===u&&t)l=!0;else if(t){if(Date.now()-new Date(t.metadata.creationTime).getTime()<3e5&&await async function(e,t){try{const e=t.storage().get("marketing.affiliate",null),a=t.storage().get("marketing.utm",null);if(t.storage().get("marketing.signupSent",!1))return;const n={affiliateCode:e?.code||"",affiliateData:e||{},utmData:a||{},context:t.utilities().getContext()},s=t.getApiUrl()+"/backend-manager",r=await(0,o.A)(s,{method:"POST",body:{command:"user:sign-up",payload:n}});console.log("[Auth] User metadata sent successfully:",r),t.storage().set("marketing.signupSent",!0)}catch(e){console.error("[Auth] Error sending user metadata:",e)}}(0,a),"unauthenticated"===r){if(d)return void s(d);s(i)}}else{if(l&&d)return void(l=!1);"authenticated"===r&&s(c,window.location.href)}})}catch(e){return void console.warn("[Auth] Error setting up auth listener:",e)}}function s(e,t){if(!e)return;const a=new URL(e,window.location.origin);t&&a.searchParams.set("authReturnUrl",t),console.log("[Auth] Redirecting to:",a.href),window.location.href=a}},9038:(e,t,a)=>{"use strict";function o(e,t){const{webManager:a}=e;let o=!1;console.log("Running complete()");const n=e=>{o||(o=!0,console.log(`Removing page loading state (source: ${e})`),requestAnimationFrame(()=>{document.documentElement.removeAttribute("data-page-loading"),document.documentElement.setAttribute("aria-busy","false")}))};if(console.log("Document readyState:",document.readyState),"complete"===document.readyState)return void n("Complete");window.addEventListener("load",()=>{n("Load")},{once:!0});const s=setInterval(()=>{"complete"===document.readyState&&(clearInterval(s),n("Polling"))},50);setTimeout(()=>{clearInterval(s),n("Timeout")},3e3)}a.d(t,{default:()=>o})}}]);